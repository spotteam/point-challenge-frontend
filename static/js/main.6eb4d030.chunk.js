(this["webpackJsonppoint-challenge-frontend"]=this["webpackJsonppoint-challenge-frontend"]||[]).push([[0],{35:function(t,e,n){},36:function(t,e,n){},38:function(t,e,n){},39:function(t,e,n){},44:function(t,e,n){},46:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),i=n(11),c=n.n(i),o=(n(35),n(24)),l=n(28),s=n(6),d=n(49),u=n(25),p=n(19),j=function(t,e,n){return fetch("https://point-backend-saad-eswar.herokuapp.com/secure/graphql",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+t},body:JSON.stringify({query:e,variables:n})}).then((function(t){return t.json()}))},h=function(t,e){j(t,"\n    query {\n      posts {\n        id\n        createdAt\n        content\n      }\n      user {\n        email\n      }\n    }\n  ",{}).then((function(t){void 0!==t&&void 0!==t.data&&void 0!==t.data.posts&&void 0!==t.data.user&&void 0!==t.data.user.email?e(!0,t.data.posts.reverse(),t.data.user.email):e(!1)})).catch((function(t){e(!1)}))},b=function(t,e,n){fetch("https://point-backend-saad-eswar.herokuapp.com/login",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:t,password:e})}).then((function(t){return t.status,t.json()})).then((function(t){void 0!==t&&void 0!==t.token?n(!0,t.token):n(!1)}))},f=(n(36),n(3));var v=function(t){var e=Object(a.useState)(""),n=Object(s.a)(e,2),r=n[0],i=n[1];return Object(f.jsxs)("div",{className:"container-card",children:[Object(f.jsx)(p.a,{className:"tweet-composer",placeholder:"What's on your mind?",value:r,minRows:2,onChange:function(t){i(t.target.value)}}),Object(f.jsx)(u.a,{className:"tweet-button",variant:"primary",onClick:function(e){var n,a,c;e.preventDefault(),n=t.token,a=r,c=t.addTweetToList,j(n,"mutation CreatePost($content: String) {\n    createPost(content: $content) {\n      id\n      createdAt\n      content\n    }\n  }",{content:a}).then((function(t){void 0!==t&&void 0!==t.data&&void 0!==t.data.createPost&&c(t.data.createPost)})),i("")},children:"Tweet"})]})};function O(){return(O=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function m(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var g=a.createElement("path",{d:"M15,0H9A3,3,0,0,0,6,3V4H2A1,1,0,0,0,2,6H3.054L3.9,21.167a3,3,0,0,0,3,2.833H17.108a3,3,0,0,0,3-2.833L20.946,6H22a1,1,0,0,0,0-2H18V3A3,3,0,0,0,15,0ZM8,3A1,1,0,0,1,9,2h6a1,1,0,0,1,1,1V4H8ZM18.106,21.056a1,1,0,0,1-1,.944H6.892a1,1,0,0,1-1-.944L5.057,6H18.943Z"}),x=a.createElement("path",{d:"M12,10a1,1,0,0,0-1,1v6a1,1,0,0,0,2,0V11A1,1,0,0,0,12,10Z"}),w=a.createElement("path",{d:"M16,10a1,1,0,0,0-1,1v6a1,1,0,0,0,2,0V11A1,1,0,0,0,16,10Z"}),y=a.createElement("path",{d:"M8,10a1,1,0,0,0-1,1v6a1,1,0,0,0,2,0V11A1,1,0,0,0,8,10Z"});function A(t,e){var n=t.title,r=t.titleId,i=m(t,["title","titleId"]);return a.createElement("svg",O({height:"100px",width:"100px",fill:"#1a1a1a",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 24 24",x:"0px",y:"0px",ref:e,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,g,x,w,y)}var S=a.forwardRef(A);n.p;function E(){return(E=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function I(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var P=a.createElement("path",{d:"M2,28a3,3,0,0,0,3,3h5a1,1,0,0,0,0-2H5a1,1,0,0,1-1-1V6A1,1,0,0,1,5,5H7V6A1,1,0,0,0,9,6V5h4V6a1,1,0,0,0,2,0V5h4V6a1,1,0,0,0,2,0V5h2a1,1,0,0,1,1,1v6a1,1,0,0,0,2,0V6a3,3,0,0,0-3-3H21V2a1,1,0,0,0-2,0V3H15V2a1,1,0,1,0-2,0V3H9V2A1,1,0,0,0,7,2V3H5A3,3,0,0,0,2,6Z"}),H=a.createElement("path",{d:"M8,12H20a1,1,0,0,0,0-2H8a1,1,0,1,0,0,2Z"}),N=a.createElement("path",{d:"M8,16H18a1,1,0,1,0,0-2H8a1,1,0,1,0,0,2Z"}),V=a.createElement("path",{d:"M16,19a1,1,0,0,0-1-1H8a1,1,0,1,0,0,2h7A1,1,0,0,0,16,19Z"}),L=a.createElement("path",{d:"M8,22a1,1,0,1,0,0,2h4a1,1,0,0,0,0-2Z"}),k=a.createElement("path",{d:"M14,31a.882.882,0,0,0,.23-.024L17.94,30.1a.993.993,0,0,0,.477-.266L29.169,19.077a3,3,0,0,0-4.242-4.242L14.175,25.587a1,1,0,0,0-.266.476l-.878,3.707A1.01,1.01,0,0,0,14,31Zm1.785-4.2L26.341,16.249a1.006,1.006,0,0,1,1.414,1.414L17.2,28.215l-1.852.438Z"});function C(t,e){var n=t.title,r=t.titleId,i=I(t,["title","titleId"]);return a.createElement("svg",E({height:"100px",width:"100px",fill:"#1A1A1A",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 32 32",x:"0px",y:"0px",ref:e,"aria-labelledby":r},i),n?a.createElement("title",{id:r},n):null,P,H,N,V,L,k)}var T=a.forwardRef(C);n.p;function Z(){return(Z=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t}).apply(this,arguments)}function M(t,e){if(null==t)return{};var n,a,r=function(t,e){if(null==t)return{};var n,a,r={},i=Object.keys(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(a=0;a<i.length;a++)n=i[a],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}var $=a.createElement("path",{d:"M70,28H53V18H47V28H30A11,11,0,0,0,19,39V71A11,11,0,0,0,30,82H70A11,11,0,0,0,81,71V39A11,11,0,0,0,70,28Zm5,43a5,5,0,0,1-5,5H30a5,5,0,0,1-5-5V39a5,5,0,0,1,5-5H47V55.76l-9-9L33.76,51,47.88,65.12a3,3,0,0,0,4.24,0L66.24,51,62,46.76l-9,9V34H70a5,5,0,0,1,5,5Z"});function B(t,e){var n=t.title,r=t.titleId,i=M(t,["title","titleId"]);return a.createElement("svg",Z({height:"100px",width:"100px",fill:"#1A1A1A",xmlns:"http://www.w3.org/2000/svg","data-name":"Layer 1",viewBox:"0 0 100 100",x:"0px",y:"0px",ref:e,"aria-labelledby":r},i),void 0===n?a.createElement("title",{id:r},"Artboard 79"):n?a.createElement("title",{id:r},n):null,$)}var D=a.forwardRef(B);n.p,n(38);var R=function(t){var e=Object(a.useState)(!1),n=Object(s.a)(e,2),r=n[0],i=n[1],c=Object(a.useState)(t.content),o=Object(s.a)(c,2),l=o[0],d=o[1];return Object(f.jsxs)("div",{className:"container-card",children:[Object(f.jsxs)("div",{className:"tweet-header",children:[Object(f.jsx)("div",{className:"tweet-user",children:t.userName}),Object(f.jsx)("div",{children:new Date(t.createdAt).toLocaleString()})]}),Object(f.jsxs)("div",{className:"tweet-body",children:[Object(f.jsx)("div",{style:{flexGrow:1},children:Object(f.jsx)(p.a,{className:"tweet-content",style:{borderColor:r?"black":"transparent"},value:l,onChange:function(t){return d(t.target.value)},disabled:!r})}),Object(f.jsxs)("div",{className:"tweet-actions",children:[r?Object(f.jsx)(D,{className:"save-icon",style:{marginRight:"5px"},onClick:function(e){!function(t,e,n,a){j(t,"mutation EditPost($postId: Int, $content: String) {\n    editPost(postId: $postId, content: $content) {\n      id\n      createdAt\n      content\n    }\n  }",{postId:e,content:n}).then((function(t){void 0!==t&&void 0!==t.data&&void 0!==t.data.editPost&&a(e,t.data.editPost.content)}))}(t.token,t.id,l,t.updateTweet),i(!1)}}):Object(f.jsx)(T,{className:"edit-icon",style:{marginRight:"5px"},onClick:function(t){i(!0)}}),Object(f.jsx)(S,{className:"delete-icon",onClick:function(e){var n,a,r;n=t.token,a=t.id,r=t.deleteTweet,j(n,"mutation DeletePost($postId: Int) {\n    deletePost(postId: $postId)\n  }",{postId:a}).then((function(t){r(a)}))}})]})]})]})},G=n(51),J=n(48),F=n(50);n(39);var q=function(t){var e=Object(a.useState)(""),n=Object(s.a)(e,2),r=n[0],i=n[1],c=Object(a.useState)(""),o=Object(s.a)(c,2),l=o[0],d=o[1],p=Object(a.useState)(!1),j=Object(s.a)(p,2),h=j[0],v=j[1],O=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;!0===e&&null!==n?(window.localStorage.setItem("jwt",n),t.initialize(n)):v(!0)},m=function(t){t.preventDefault(),function(t,e,n){fetch("https://point-backend-saad-eswar.herokuapp.com/signup",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({email:t,password:e})}).then((function(a){200!==a.status?n(!1):b(t,e,n)}))}(r,l,O)};return Object(f.jsx)("div",{className:"signup-card",children:Object(f.jsxs)(G.a,{defaultActiveKey:"signup",transition:!1,children:[Object(f.jsx)(J.a,{eventKey:"signup",title:"Sign Up",children:Object(f.jsxs)(F.a,{onSubmit:function(t){return m(t)},children:[Object(f.jsxs)(F.a.Group,{controlId:"signupEmail",children:[Object(f.jsx)(F.a.Label,{children:"Email address"}),Object(f.jsx)(F.a.Control,{type:"email",placeholder:"Enter email",onChange:function(t){return i(t.target.value)}})]}),Object(f.jsxs)(F.a.Group,{controlId:"signupPassword",children:[Object(f.jsx)(F.a.Label,{children:"Password"}),Object(f.jsx)(F.a.Control,{type:"password",placeholder:"Password",onChange:function(t){return d(t.target.value)}})]}),Object(f.jsxs)("div",{className:"button-row",children:[Object(f.jsx)(u.a,{variant:"primary",type:"submit",children:"Sign Up"}),h&&Object(f.jsx)("div",{className:"auth-fail-text",children:"Authentication failed"})]})]})}),Object(f.jsx)(J.a,{eventKey:"login",title:"Log In",children:Object(f.jsxs)(F.a,{onSubmit:function(t){return function(t){t.preventDefault(),b(r,l,O)}(t)},children:[Object(f.jsxs)(F.a.Group,{controlId:"loginEmail",children:[Object(f.jsx)(F.a.Label,{children:"Email address"}),Object(f.jsx)(F.a.Control,{type:"email",placeholder:"Enter email",onChange:function(t){return i(t.target.value)}})]}),Object(f.jsxs)(F.a.Group,{controlId:"loginPassword",children:[Object(f.jsx)(F.a.Label,{children:"Password"}),Object(f.jsx)(F.a.Control,{type:"password",placeholder:"Password",onChange:function(t){return d(t.target.value)}})]}),Object(f.jsxs)("div",{className:"button-row",children:[Object(f.jsx)(u.a,{variant:"primary",type:"submit",children:"Log In"}),h&&Object(f.jsx)("div",{className:"auth-fail-text",children:"Authentication failed"})]})]})})]})})};n(44),n(45);var z=function(){var t=Object(a.useState)([]),e=Object(s.a)(t,2),n=e[0],r=e[1],i=Object(a.useState)(""),c=Object(s.a)(i,2),p=c[0],j=c[1],b=Object(a.useState)(!0),O=Object(s.a)(b,2),m=O[0],g=O[1],x=Object(a.useState)(null),w=Object(s.a)(x,2),y=w[0],A=w[1];Object(a.useEffect)((function(){var t=window.localStorage.getItem("jwt");void 0!==t&&null!==t?h(t,(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!0===e&&null!==n&&null!==a&&(r(n),j(a),A(t)),g(!1)})):g(!1)}),[]);var S=function(t){return r(n.filter((function(e){return e.id!==t})))},E=function(t,e){return r(n.map((function(n){return n.id===t?Object(o.a)(Object(o.a)({},n),{},{content:e}):n})))};return Object(f.jsx)("div",{className:"product-container",children:m?Object(f.jsx)(d.a,{animation:"border",variant:"primary"}):null!==y?Object(f.jsxs)("div",{className:"feed-container",children:[Object(f.jsx)("div",{className:"header-text",children:"Twitter2 - Eswar and Saad"}),Object(f.jsxs)("div",{className:"logged-in-text",children:["Logged in as ",p]}),Object(f.jsx)(u.a,{variant:"primary",style:{marginBottom:"15px"},onClick:function(){window.localStorage.removeItem("jwt"),A(null),r([]),j("")},children:"Log Out"}),Object(f.jsx)(v,{token:y,addTweetToList:function(t){return r((function(e){return[t].concat(Object(l.a)(e))}))}}),Object(f.jsx)("div",{className:"tweet-feed",children:n.map((function(t){return Object(f.jsx)(R,{id:t.id,content:t.content,createdAt:t.createdAt,token:y,userName:p,deleteTweet:S,updateTweet:E},t.id)}))})]}):Object(f.jsx)(q,{initialize:function(t){h(t,(function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;!0===t&&null!==e&&null!==n&&(r(e),j(n))})),A(t)}})})},K=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,i=e.getLCP,c=e.getTTFB;n(t),a(t),r(t),i(t),c(t)}))};c.a.render(Object(f.jsx)(r.a.StrictMode,{children:Object(f.jsx)(z,{})}),document.getElementById("root")),K()}},[[46,1,2]]]);
//# sourceMappingURL=main.6eb4d030.chunk.js.map